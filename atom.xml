<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://kioipp.cn</id>
    <title>è‡ªç•™åœ°</title>
    <updated>2020-10-29T03:03:40.620Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://kioipp.cn"/>
    <link rel="self" href="https://kioipp.cn/atom.xml"/>
    <subtitle>æ¢¦é‡Œä¸çŸ¥èº«æ˜¯å®¢ï¼Œä¸€æ™Œè´ªæ¬¢ã€‚</subtitle>
    <logo>https://kioipp.cn/images/avatar.png</logo>
    <icon>https://kioipp.cn/favicon.ico</icon>
    <rights>All rights reserved 2020, è‡ªç•™åœ°</rights>
    <entry>
        <title type="html"><![CDATA[Docker å¤šé˜¶æ®µæ„å»º]]></title>
        <id>https://kioipp.cn/post/docker-duo-jie-duan-gou-jian/</id>
        <link href="https://kioipp.cn/post/docker-duo-jie-duan-gou-jian/">
        </link>
        <updated>2020-10-29T02:47:25.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>å·æ‡’æ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>å·æ‡’æ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯</p>
</blockquote>
<!-- more -->
<p>ä»Šå¤©çœ‹åˆ°ä¸€ä¸ªæ¦‚å¿µï¼Œä¸æ˜¯æ–°çš„ï¼Œä½†ä¹‹å‰å´å¾ˆå¥‡æ€ªåœ°å®Œå…¨æ²¡æœ‰æ¥è§¦è¿‡ã€‚</p>
<p><a href="https://docs.docker.com/develop/develop-images/multistage-build/">Docker multi-stage builds</a></p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ Dockerfile æ”¯æŒå¤šæ¬¡ buildï¼Œç„¶åæŠŠä¸Šä¸€æ¬¡ build äº§ç”Ÿçš„æ–‡ä»¶ç›´æ¥ COPY åˆ°ä¸‹ä¸€æ¬¡çš„ build è¿‡ç¨‹ä¸­ã€‚</p>
<p>ç›¸å½“äºç¬¬äºŒæ¬¡çš„ build é‡Œåªæ‰§è¡Œäº†ä¸€æ¬¡ COPYï¼Œçœå»ä¸­é—´å¾ˆå¤šä¸‹è½½ã€å®‰è£…ã€ç¼–è¯‘çš„è¿‡ç¨‹ã€‚</p>
<h2 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h2>
<ul>
<li>æŠŠ build + run è¿‡ç¨‹åˆ†ç¦»ï¼Œè®© run åªè´Ÿè´£ runï¼›</li>
<li>å¤§å¹…åº¦å‡å°‘ run é•œåƒçš„å±‚æ•°ï¼Œä»è€Œå‹ç¼© run ç¯å¢ƒçš„åˆ†å‘å’Œæ›´æ–°æ—¶é—´ï¼›</li>
</ul>
<h2 id="ç¼ºç‚¹">ç¼ºç‚¹</h2>
<ul>
<li>å¯¹äºåŠ¨æ€è¯­è¨€æ¥è¯´ï¼ˆæ¯”å¦‚ SRE å·¥ç¨‹å¸ˆæœ€çˆ±çš„ Pythonï¼‰ï¼Œä¾èµ–ç¯å¢ƒè¾ƒéš¾å¤„ç†ï¼Œéœ€è¦ç”¨é¢å¤–çš„æ‰“åŒ…å·¥å…·ï¼›</li>
<li>æ‰“åŒ…åé•œåƒåªæœ‰ run ç¯å¢ƒï¼Œå‡ºé—®é¢˜çš„æ—¶å€™ä¸æ–¹ä¾¿è¿›è¡Œ debugï¼›</li>
</ul>
<p>ä»ä¸Šé¢çš„ä¼˜ç¼ºç‚¹å¯ä»¥çœ‹åˆ°ï¼Œå¯¹é™æ€è¯­è¨€ï¼Œå°¤å…¶æ˜¯æœ€åå¯ä»¥æ‰“åŒ…æˆäºŒè¿›åˆ¶çš„æ–‡ä»¶æ¥è¯´ï¼Œå¤šé˜¶æ®µæ„å»ºçš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå¯¹åŠ¨æ€è¯­è¨€æ¥è¯´ï¼Œå°±éœ€è¦å„ç§å°è¯•ï¼Œç¡®è®¤æ‰“åŒ…åç¨‹åºçš„ç¨³å®šæ€§ã€‚</p>
<h2 id="ä¾‹å­">ä¾‹å­</h2>
<p>è¿™é‡Œæ‘˜æŠ„ä¸¤ä¸ªåœ¨ç½‘ä¸Šçœ‹åˆ°çš„ python çš„ä¾‹å­ï¼š</p>
<h3 id="ä½¿ç”¨-wheel">ä½¿ç”¨ wheel</h3>
<pre><code>FROM python:2.7-alpine as base
RUN mkdir /svc
COPY . /svc
WORKDIR /svc
RUN apk add --update \
    postgresql-dev \
    gcc \
    musl-dev \
    linux-headers
RUN pip install wheel &amp;&amp; pip wheel . --wheel-dir=/svc/wheels

FROM python:2.7-alpine
COPY --from=base /svc /svc
WORKDIR /svc
RUN pip install --no-index --find-links=/svc/wheels -r requirements.txt
</code></pre>
<h3 id="ä½¿ç”¨-pyinstaller">ä½¿ç”¨ pyinstaller</h3>
<pre><code>FROM python:3.6 as build-env
WORKDIR /app/
ADD . /app/
ADD https://github.com/pyinstaller/pyinstaller/archive/develop.zip /app/pyinstaller-develop.zip
RUN pip install -r requirements.txt &amp;&amp; \
    pip install pyinstaller-develop.zip
RUN pyinstaller --hidden-import=tornado --onefile -d -y run.py
 
FROM frolvlad/alpine-glibc
WORKDIR /app/
COPY --from=build-env /app/dist/run .
ENTRYPOINT [&quot;./run&quot;]
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[macOS ä¸Š Python è™šæ‹Ÿç¯å¢ƒçš„ç®¡ç†: pyenv]]></title>
        <id>https://kioipp.cn/post/macos-shang-python-xu-ni-huan-jing-de-guan-li-pyenv/</id>
        <link href="https://kioipp.cn/post/macos-shang-python-xu-ni-huan-jing-de-guan-li-pyenv/">
        </link>
        <updated>2020-10-27T12:03:17.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>&quot;Shit moutain.&quot;</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>&quot;Shit moutain.&quot;</p>
</blockquote>
<!-- more -->
<h2 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</h2>
<blockquote>
<p>https://github.com/pyenv/pyenv</p>
</blockquote>
<h2 id="å®‰è£…">å®‰è£…</h2>
<pre><code>brew install pyenv
</code></pre>
<h2 id="å‘½ä»¤">å‘½ä»¤</h2>
<p>åˆ—å‡ºå½“å‰å·²å®‰è£…çš„ python ç‰ˆæœ¬</p>
<pre><code>pyenv version
</code></pre>
<p>åˆ—å‡ºå¯å®‰è£…ç‰ˆæœ¬</p>
<pre><code>pyenv install --list
</code></pre>
<p>åˆ—å‡ºå½“å‰å¯ç”¨çš„è™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv  virtualenvs
</code></pre>
<p>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv virtualenv &lt;Python ç‰ˆæœ¬å·&gt; &lt;è™šæ‹Ÿç¯å¢ƒåç§°&gt;
</code></pre>
<p>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv activate &lt;è™šæ‹Ÿç¯å¢ƒåç§°&gt;
</code></pre>
<p>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv deactivate
</code></pre>
<p>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv uninstall &lt;è™šæ‹Ÿç¯å¢ƒåç§°&gt;
</code></pre>
<h2 id="vscode">Vscode</h2>
<p>æŠŠå·¥ä½œåŒºé…ç½®æ–‡ä»¶é‡Œçš„ <code>&quot;python.pythonPath&quot;</code> æ¢æˆ <code>pyenv which python</code> æ‰“å°çš„è·¯å¾„ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pythonå®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•ä¸¾ä¾‹ç†è§£]]></title>
        <id>https://kioipp.cn/post/python-shi-li-fang-fa-lei-fang-fa-he-jing-tai-fang-fa-ju-li-li-jie/</id>
        <link href="https://kioipp.cn/post/python-shi-li-fang-fa-lei-fang-fa-he-jing-tai-fang-fa-ju-li-li-jie/">
        </link>
        <updated>2020-10-20T11:42:30.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¸€æ¬¡æ€§ç†è§£å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¸€æ¬¡æ€§ç†è§£å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•ã€‚</p>
<!-- more -->
<p>ä»Šå¤©çš„å¯¹è±¡ï¼š</p>
<ul>
<li>@classmethod ç±»æ–¹æ³•ï¼›</li>
<li>@staticmethod é™æ€æ–¹æ³•ï¼›</li>
<li>æ™®é€šå®ä¾‹æ–¹æ³•ï¼›</li>
</ul>
<h3 id="1-åŸºæœ¬ç±»">1. åŸºæœ¬ç±»</h3>
<p>å…ˆå†™ä»æ™®é€šçš„ä¸€ä¸ªç±»å†™èµ·ï¼š</p>
<pre><code class="language-python">
class Fruit(object):

    def __init__(self, name):
        self.name = name

apple = Fruit('apple')
</code></pre>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ç§°<code>Fruit</code>ä¸º<code>classï¼ˆç±»ï¼‰</code>ï¼Œ<code>apple</code>ä¸º<code>instanceï¼ˆå®ä¾‹ï¼‰</code>ã€‚</p>
<hr>
<h3 id="2-å®ä¾‹æ–¹æ³•">2. å®ä¾‹æ–¹æ³•</h3>
<p>æ¥ä¸‹æ¥å†æ·»åŠ ä¸€ä¸ªå€¼<code>price</code>å’Œæ–¹æ³•<code>show_price</code>ï¼š</p>
<pre><code class="language-python">
class Fruit(object):

    def __init__(self, name, price):
        self.name = name
        self.price = price

    def show_price(self):
        print(f'The price is {self.price}')

apple = Fruit('apple', 7.0)
apple.show_price()
</code></pre>
<p>è¿™ä¸ªæ—¶å€™ï¼Œ<code>apple.show_price</code>å°±æ˜¯<code>apple</code>è¿™ä¸ªå®ä¾‹çš„<code>instance methodï¼ˆå®ä¾‹æ–¹æ³•ï¼‰</code>ã€‚<br>
ç›´æ¥ç”¨ Fruit.show_price() è°ƒç”¨ä¼šå‡ºé”™ï¼Œä»ä¸¤ä¸ªæ¦‚å¿µä¸Šè¯´ï¼š</p>
<ul>
<li>instance methodæ˜¯<code>å®ä¾‹æ–¹æ³•</code>ï¼Œåªèƒ½ç”±<code>å®ä¾‹</code>è°ƒç”¨ï¼Œä¸èƒ½ç”±<code>ç±»</code>è°ƒç”¨ã€‚<code>show_price(self)</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>å®ä¾‹</code>ã€‚</li>
<li><code>æ°´æœ</code>æ²¡æœ‰ä»·æ ¼çš„æ¦‚å¿µï¼Œ<code>è‹¹æœ</code>æ‰æœ‰ã€‚</li>
</ul>
<hr>
<h3 id="3-ç±»æ–¹æ³•">3. ç±»æ–¹æ³•</h3>
<p>ç»§ç»­æ·»åŠ ä¸€ä¸ªæ–¹æ³•<code>eat()</code>ï¼š</p>
<pre><code class="language-python">
class Fruit(object):

    def __init__(self, name, price):
        self.name = name
        self.price = price

    def show_price(self):
        print(f'The price is {self.price}')

    @classmethod
    def eat(cls):
        print(&quot;Enjoy.&quot;)

apple = Fruit('apple', 7.0)
apple.show_price()
Fruit.eat()
apple.eat()
</code></pre>
<p>åŒæ ·ï¼Œæˆ‘ä»¬ä»ä¸¤ä¸ªçº¬åº¦ç†è§£ï¼š</p>
<ul>
<li><code>eat(cls)</code>çš„å‚æ•°æ˜¯ <code>cls</code>ï¼Œå³ç±»æ˜¯å®ƒçš„å‚æ•°ï¼Œå› æ­¤å¯ä»¥ä»ç±»ç›´æ¥è°ƒç”¨ã€‚å®ä¾‹ä¹Ÿæ˜¯ç±»ï¼Œå› æ­¤å®ä¾‹ä¹Ÿå¯ä»¥è°ƒç”¨ã€‚ç±»æ–¹æ³•ä¸»è¦ç”¨äºä¸€äº›ä¸éœ€è¦å®ä¾‹åŒ–ç±»å°±èƒ½è°ƒç”¨çš„æ–¹æ³•ã€‚</li>
<li>ç»å¤§éƒ¨åˆ†æ°´æœå…·æœ‰å¯ä»¥é£Ÿç”¨çš„å±æ€§ï¼Œå› æ­¤è¯´<code>åƒæ°´æœ</code>å’Œ<code>åƒè‹¹æœ</code>åœ¨é€»è¾‘ä¸Šéƒ½æˆç«‹ã€‚</li>
</ul>
<hr>
<h3 id="4-é™æ€æ–¹æ³•">4. é™æ€æ–¹æ³•</h3>
<p>è¿™æ¬¡æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªé™æ€æ–¹æ³• <code>will_go_bad()</code> å’Œä¸€ä¸ªå¤–éƒ¨çš„é™æ€å˜é‡ <code>BAD_WEATHER</code></p>
<pre><code class="language-python">
BAD_WEATHER = True

class Fruit(object):

    def __init__(self, name, price):
        self.name = name
        self.price = price

    def show_price(self):
        print(f'The price is {self.price}')

    @classmethod
    def eat(cls):
        print(&quot;Enjoy.&quot;)

    @staticmethod
    def will_go_bad():
        if BAD_WEATHER:
            return True

apple = Fruit('apple', 7.0)
apple.will_go_bad()
Fruit.will_go_bad()
</code></pre>
<ul>
<li>ä»ç©ºé—´ä¸Šç†è§£ï¼Œé™æ€æ–¹æ³• <code>will_go_bad()</code> åªæ˜¯å®šä¹‰åœ¨ç±»è¿™ä¸ªç©ºé—´ï¼ˆç±»å‘½åç©ºé—´ï¼‰ä¸­ï¼Œæ²¡æœ‰ä»»ä½•ç‰¹æ®Šçš„<code>cls</code> æˆ–è€…<code>self</code> çš„ç»‘å®šï¼Œå®ƒä¹Ÿ<code>ä¸èƒ½è®¿é—®ç±»é‡Œä»»ä½•çš„å¯¹è±¡æˆ–è€…æ–¹æ³•</code>ã€‚å’Œå…¨å±€å‡½æ•°ä¸åŒçš„æ˜¯ï¼Œå®ƒåªèƒ½é€šè¿‡è®¿é—®ç±»è¿™ä¸ªç©ºé—´æ¥è°ƒç”¨ã€‚é™æ€æ–¹æ³•ç”¨äºå¤„ç†ç±»å¤–éƒ¨ä¾èµ–çš„äº¤äº’ã€‚</li>
<li>ä»é€»è¾‘ä¸Šç†è§£ï¼Œåå¤©æ°”ä¼šå½±å“æ°´æœçš„å¥½åï¼›ä½†åå¤©æ°”å’Œæ°´æœä¹‹é—´æ˜¯ä¸èƒ½äº’ç›¸è®¿é—®çš„ï¼Œåªèƒ½é€šè¿‡æŸç§é€»è¾‘è¿›è¡Œå…³è”ã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[manage.py: ç®€æ˜å¥½ç”¨çš„ CLI builder]]></title>
        <id>https://kioipp.cn/post/managepy-jian-ming-hao-yong-de-cli-builder/</id>
        <link href="https://kioipp.cn/post/managepy-jian-ming-hao-yong-de-cli-builder/">
        </link>
        <updated>2020-10-19T03:16:05.000Z</updated>
        <summary type="html"><![CDATA[<p>&quot;CLI is everything.&quot;</p>
]]></summary>
        <content type="html"><![CDATA[<p>&quot;CLI is everything.&quot;</p>
<!-- more -->
<h2 id="pip-å®˜æ–¹é¡¹ç›®åœ°å€">PIP å®˜æ–¹é¡¹ç›®åœ°å€</h2>
<blockquote>
<p>https://pypi.org/project/manage.py/  ï¼ˆå«å®˜æ–¹ç”¨ä¾‹ï¼‰</p>
</blockquote>
<h2 id="å®‰è£…">å®‰è£…</h2>
<pre><code class="language-bash">pip install mange.py
</code></pre>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<h3 id="1åˆ›å»ºå‘½ä»¤">1.åˆ›å»ºå‘½ä»¤</h3>
<pre><code class="language-python">from manager import Manager

manager_echo = Manager()


@manager_echo.command
def echo_with_no_args():
    &quot;&quot;&quot;Command description, will show on command line.
    &quot;&quot;&quot;
    print(&quot;Hello&quot;)


if __name__ == '__main__':
    manager_echo.main()
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py
usage: cli_sample.py &lt;command&gt; [&lt;args&gt;]

positional arguments:
  command     the command to run

optional arguments:
  -h, --help  show this help message and exit

available commands:
  echo_with_no_args        Command description, will show on command line.
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py echo_with_no_args
Hello
</code></pre>
<hr>
<h3 id="2-å¤šé‡-namepspace-ç®¡ç†">2. å¤šé‡ namepspace ç®¡ç†</h3>
<pre><code class="language-python">from manager import Manager
import time

manager_echo = Manager()
manager_ops = Manager()
manager_main = Manager()

manager_main.merge(manager_echo, namespace='echo')
manager_main.merge(manager_ops, namespace='ops')


@manager_echo.command
def echo_with_no_args():
    &quot;&quot;&quot;Command description, will show on command line.
    &quot;&quot;&quot;
    print(&quot;Hello&quot;)


@manager_ops.command
def ops_with_no_args():
    &quot;&quot;&quot;Do some operation without args.
    &quot;&quot;&quot;
    print(time.time() + 1.0)


manager_main.merge(manager_echo, namespace='echo')
manager_main.merge(manager_ops, namespace='ops')

if __name__ == '__main__':
    manager_main.main()
</code></pre>
<pre><code class="language-bash">python3 cli_sample.py
usage: cli_sample.py [&lt;namespace&gt;.]&lt;command&gt; [&lt;args&gt;]

positional arguments:
  command     the command to run

optional arguments:
  -h, --help  show this help message and exit

available commands:

  [echo]
    echo_with_no_args      Command description, will show on command line.


  [ops]
    ops_with_no_args       Do some operation without args.
</code></pre>
<pre><code class="language-bash">python3 cli_sample.py ops.ops_with_no_args
1603078473.9244218
</code></pre>
<hr>
<h3 id="3ä¸å¸¦æç¤º-æŒ‰ç…§é¡ºåºè¾“å…¥çš„å‚æ•°">3.ä¸å¸¦æç¤ºã€æŒ‰ç…§é¡ºåºè¾“å…¥çš„å‚æ•°</h3>
<pre><code class="language-python">@manager_echo.command
def echo_with_args(name, pid):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    print(f'Name is {name}, PID is {pid}')
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args  test 77
Name is test, PID is 77
</code></pre>
<hr>
<h3 id="4å¸¦æç¤ºçš„é¡ºåºè¾“å…¥çš„å‚æ•°">4.å¸¦æç¤ºçš„é¡ºåºè¾“å…¥çš„å‚æ•°</h3>
<pre><code class="language-python">@manager_echo.arg('name', help='User\'s name')
@manager_echo.arg('pid', help='App\'s PID')
@manager_echo.command
def echo_with_args(name, pid):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    print(f'Name is {name}, PID is {pid}')
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args -h
usage: cli_sample.py echo.echo_with_args [-h] name pid

Echo given &lt;params&gt;

positional arguments:
  name        User's name
  pid         App's PID

optional arguments:
  -h, --help  show this help message and exit
</code></pre>
<hr>
<h3 id="5-å¿…è¦å‚æ•°å’Œéå¿…è¦å‚æ•°çš„æç¤ºè¾“å…¥">5. å¿…è¦å‚æ•°å’Œéå¿…è¦å‚æ•°çš„æç¤ºè¾“å…¥</h3>
<pre><code class="language-python">@manager_echo.arg('name', help='User\'s name')
@manager_echo.arg('pid', help='App\'s PID')
@manager_echo.command
def echo_with_args(name, pid=''):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    print(f'Name is {name}, PID is {pid}')
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args -h
usage: cli_sample.py echo.echo_with_args [-h] [--name NAME] [--pid PID]

Echo given &lt;params&gt;

optional arguments:
  -h, --help   show this help message and exit
  --name NAME  User's name
  --pid PID    App's PID
</code></pre>
<pre><code class="language-bash">$ temp python3 cli_sample.py echo.echo_with_args 123
Name is 123, PID is
$ temp python3 cli_sample.py echo.echo_with_args 123 --pid 777
Name is 123, PID is 777
</code></pre>
<hr>
<p>æˆ–è€…ä½œä¸ºå¸ƒå°”å€¼ä½¿ç”¨ï¼š</p>
<pre><code class="language-python">@manager_echo.arg('name', help='User\'s name')
@manager_echo.arg('pid', help='App\'s PID')
@manager_echo.command
def echo_with_args(name, pid=False):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    if pid:
        print(f'Name is {name}, PID exists')
    else:
        print(f'Name is {name}, PID not exists')
</code></pre>
<hr>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args batman
Name is batman, PID not exists
$ python3 cli_sample.py echo.echo_with_args batman --pid
Name is batman, PID exists
</code></pre>
<hr>
<h3 id="6å‚æ•°-shortcuts">6.å‚æ•° shortcuts</h3>
<pre><code class="language-python">@manager_echo.arg('name', shortcut='n', help='User\'s name')
@manager_echo.arg('pid', shortcut='p', help='App\'s PID')
@manager_echo.command
def echo_with_args(name, pid=False):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    if pid:
        print(f'Name is {name}, PID exists')
    else:
        print(f'Name is {name}, PID not exists')
</code></pre>
<hr>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args batman --p
Name is batman, PID exists
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SFM(çŠ¶æ€æœº)è½®å­ï¼štransitions å­¦ä¹ ]]></title>
        <id>https://kioipp.cn/post/python-sfmzhuang-tai-ji-lun-zi-transitions-xue-xi/</id>
        <link href="https://kioipp.cn/post/python-sfmzhuang-tai-ji-lun-zi-transitions-xue-xi/">
        </link>
        <updated>2020-10-15T07:43:20.000Z</updated>
        <content type="html"><![CDATA[<p>ä»åŒäº‹å†™çš„ä¸€ä¸ªå·¥å…·é‡Œå‘ç°äº†è¿™ä¸ªåº“ï¼Œèƒ½é€‚ç”¨å¾ˆå¤šéœ€è¦çŠ¶æ€ç®¡ç†çš„åœºæ™¯ï¼Œä½œè€…å†™çš„ Code Samples æ›´æœ‰æ„æ€ã€‚ç‰¹æ­¤è®°å½•å¹¶å†™ä¸‹å­¦ä¹ è¿™ä¸ªåº“æ—¶å€™çš„å¿ƒå¾—ã€‚</p>
<h2 id="è™è ä¾ å¿«é€Ÿç¤ºèŒƒ">è™è ä¾ å¿«é€Ÿç¤ºèŒƒ</h2>
<pre><code class="language-python">from transitions import Machine
import random

class NarcolepticSuperhero(object):

    # Define some states. Most of the time, narcoleptic superheroes are just like
    # everyone else. Except for...
    &quot;&quot;&quot;å®šä¹‰ä¸€ä¸ªè¶…çº§è‹±é›„çš„æ—¥å¸¸è¡Œä¸ºçŠ¶æ€
    &quot;&quot;&quot;
    states = ['asleep', 'hanging out', 'hungry', 'sweaty', 'saving the world']

    def __init__(self, name):

        # No anonymous superheroes on my watch! Every narcoleptic superhero gets
        # a name. Any name at all. SleepyMan. SlumberGirl. You get the idea.
        ## å“ªæ€•æ˜¯å«å°å¼ºï¼Œè¶…çº§è‹±é›„ä¹Ÿæ˜¯éœ€è¦ä¸€ä¸ªå“äº®çš„åå­—
        self.name = name

        # What have we accomplished today?
        ## è¶…çº§è‹±é›„æ—¥å¸¸æ‹¯æ•‘å°çŒ«ä»»åŠ¡è®¡æ•° 0/999999
        self.kittens_rescued = 0

        # Initialize the state machine
        ## è¶…çº§è‹±é›„çš„ä¸€å¤©ä»ç¡è§‰å¼€å§‹ï¼ˆé›¾
        self.machine = Machine(model=self, states=NarcolepticSuperhero.states, initial='asleep')

        # Add some transitions. We could also define these using a static list of
        # dictionaries, as we did with states above, and then pass the list to
        # the Machine initializer as the transitions= argument.

        ## ç»™è¶…çº§è‹±é›„æ·»åŠ ä¸€ç³»åˆ—ä»»åŠ¡ï¼Œè¿™æ ·å°±èƒ½è®©è¶…çº§è‹±é›„ä»èµ·åºŠåˆ·ç‰™åˆ°æ‹¯æ•‘åœ°çƒäº†
        # At some point, every superhero must rise and shine.
        self.machine.add_transition(trigger='wake_up', source='asleep', dest='hanging out')

        # Superheroes need to keep in shape.
        self.machine.add_transition('work_out', 'hanging out', 'hungry')

        # Those calories won't replenish themselves!
        self.machine.add_transition('eat', 'hungry', 'hanging out')

        # Superheroes are always on call. ALWAYS. But they're not always
        # dressed in work-appropriate clothing.

        ## è¶…çº§è‹±é›„å¯ä»¥ä»ä»»ä½•æ—¶å€™è¿›è¡Œæ‹¯æ•‘ä¸–ç•ŒçŠ¶æ€ï¼Œä½†éœ€è¦å…ˆç©¿ä¸ŠèµåŠ©å•†å®šåˆ¶æˆ˜è¡£ï½
        self.machine.add_transition('distress_call', '*', 'saving the world',
                         before='change_into_super_secret_costume')

        # When they get off work, they're all sweaty and disgusting. But before
        # they do anything else, they have to meticulously log their latest
        # escapades. Because the legal department says so.
        ## åœ¨å®Œæˆä»»åŠ¡åï¼Œä¸»æœºä¼šè‡ªåŠ¨ç»™è¶…çº§è‹±é›„è®°ä¸Šä¸€ç¬”å°çº¢èŠ±
        self.machine.add_transition('complete_mission', 'saving the world', 'sweaty',
                         after='update_journal')

        # Sweat is a disorder that can be remedied with water.
        # Unless you've had a particularly long day, in which case... bed time!
        ## å…¥ç¡å‰å¿…é¡»æ´—æ¾¡ï¼Œé™¤éè¶…çº§è‹±é›„ä»Šå¤©å‹æ ¹å°±æ²¡å‡ºé—¨â€¦â€¦ï¼ˆå³ä½¿è¿™æ ·ä¹Ÿè¦æ´—æ¾¡çš„å§å–‚ï¼éš¾é“è¶…çº§è‹±é›„æ˜¯åŒ—æ–¹äººå—ï¼Ÿ
        self.machine.add_transition('clean_up', 'sweaty', 'asleep', conditions=['is_exhausted'])
        self.machine.add_transition('clean_up', 'sweaty', 'hanging out')

        # Our NarcolepticSuperhero can fall asleep at pretty much any time.
        ## æ²¡é”™ï¼è¶…çº§è‹±é›„ä»»ä½•æ—¶å€™éƒ½èƒ½å…¥ç¡ï¼
        self.machine.add_transition('nap', '*', 'asleep')

    def update_journal(self):
        &quot;&quot;&quot; Dear Diary, today I saved Mr. Whiskers. Again. &quot;&quot;&quot;
        self.kittens_rescued += 1

    @property
    def is_exhausted(self):
        &quot;&quot;&quot; Basically a coin toss. &quot;&quot;&quot;
        return random.random() &lt; 0.5

    def change_into_super_secret_costume(self):
        print(&quot;Beauty, eh?&quot;)

</code></pre>
<p>ä¸‹é¢æˆ‘ä»¬æœ‰è¯·è™è ä¾ è¿›è¡Œè¶…çº§è‹±é›„ç¤ºèŒƒ ğŸ‘</p>
<pre><code class="language-bash">&gt;&gt;&gt; batman = NarcolepticSuperhero(&quot;Batman&quot;)
&gt;&gt;&gt; batman.state
'asleep'

&gt;&gt;&gt; batman.wake_up()
&gt;&gt;&gt; batman.state
'hanging out'

&gt;&gt;&gt; batman.nap()
&gt;&gt;&gt; batman.state
'asleep'

&gt;&gt;&gt; batman.clean_up()
MachineError: &quot;Can't trigger event clean_up from state asleep!&quot;

&gt;&gt;&gt; batman.wake_up()
&gt;&gt;&gt; batman.work_out()
&gt;&gt;&gt; batman.state
'hungry'

# Batman still hasn't done anything useful...
&gt;&gt;&gt; batman.kittens_rescued
0

# We now take you live to the scene of a horrific kitten entreement...
&gt;&gt;&gt; batman.distress_call()
'Beauty, eh?'
&gt;&gt;&gt; batman.state
'saving the world'

# Back to the crib.
&gt;&gt;&gt; batman.complete_mission()
&gt;&gt;&gt; batman.state
'sweaty'

&gt;&gt;&gt; batman.clean_up()
&gt;&gt;&gt; batman.state
'asleep'   # Too tired to shower!

# Another productive day, Alfred.
&gt;&gt;&gt; batman.kittens_rescued
1
</code></pre>
<p>TOBE Continued .</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[2020.10.12]]></title>
        <id>https://kioipp.cn/post/20201012/</id>
        <link href="https://kioipp.cn/post/20201012/">
        </link>
        <updated>2020-10-12T07:59:20.000Z</updated>
        <content type="html"><![CDATA[<p>æ·±åœ³éå¸¸éš¾å¾—åœ°å‡ºç°äº†ç§‹å¤©ã€‚</p>
<p>æ‘¸é±¼æ‘¸å‡ºäº†è½»å¾®çš„ç„¦è™‘ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://kioipp.cn/post/hello-gridea/</id>
        <link href="https://kioipp.cn/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>