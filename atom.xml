<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://kioipp.com</id>
    <title>è‡ªç•™åœ°</title>
    <updated>2021-02-22T06:36:44.686Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://kioipp.com"/>
    <link rel="self" href="https://kioipp.com/atom.xml"/>
    <subtitle>æ¢¦é‡Œä¸çŸ¥èº«æ˜¯å®¢ï¼Œä¸€æ™Œè´ªæ¬¢ã€‚</subtitle>
    <logo>https://kioipp.com/images/avatar.png</logo>
    <icon>https://kioipp.com/favicon.ico</icon>
    <rights>All rights reserved 2021, è‡ªç•™åœ°</rights>
    <entry>
        <title type="html"><![CDATA[2020.12.31]]></title>
        <id>https://kioipp.com/post/20201231/</id>
        <link href="https://kioipp.com/post/20201231/">
        </link>
        <updated>2020-12-31T06:48:50.000Z</updated>
        <summary type="html"><![CDATA[<p>åˆæ˜¯ä¸€å¹´ç»“æŸçš„åçœã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>åˆæ˜¯ä¸€å¹´ç»“æŸçš„åçœã€‚</p>
<!-- more -->
<h2 id="å·¥ä½œ">å·¥ä½œ</h2>
<p>ç»“æŸäº†ä¸€æ®µ 3 å¹´çš„å²—ä½ï¼Œå¦‚æ„¿ä»¥å¿åœ°åˆ°äº†æŸ E å‚ã€‚<br>
å°½ç®¡å²—ä½æœ‰ç‚¹ä¸å¤ªç†æƒ³ï¼Œä½†ä¹Ÿç®—æ˜¯åˆ°äº†æ–°ç¯å¢ƒï¼Œçœ‹åˆ°äº†å¾ˆå¤šæ–°é²œçš„äº‹æƒ…ï¼ˆBut fresh not means good)ã€‚<br>
å›é¡¾ä¸Šä¸€ä»½å·¥ä½œçš„æ”¶è·ï¼Œåº”è¯¥æ˜¯è®©æˆ‘æ‰¾åˆ°äº†è‡ªå·±çš„å®šä½ï¼Œæˆ–è€…è¯´è¦åŠªåŠ›çš„æ–¹å‘ã€‚æ¯•ä¸šåç³Šé‡Œç³Šæ¶‚åœ°è¿‡äº† 5 å¹´ï¼Œç„¶ååˆç»å†äº† 2 å¹´æ‰çœ‹åˆ°è‡ªå·±å°šä¸”å¯åšä¸”è¿˜æœ‰äº›å–œæ¬¢çš„ä¸€æ¡è·¯ï¼Œå¯èƒ½æµªè´¹çš„æ—¶é—´æœ‰ç‚¹å¤šã€‚ä½†ä¹‹å‰çš„ç»éªŒæ˜¯ï¼Œæ¯ä¸€ä»½ä¸èµ·çœ¼æˆ–è€…å½“æ—¶è§‰å¾—æ— ç”¨çš„ç»å†å…¶å®éƒ½æ˜¯æŸç§æˆé•¿ï¼Œåœ¨ä¹‹åæŸä¸ªæ—¶åˆ»ä¸€å®šä¼šæˆä¸ºä½ è„šä¸‹çš„åŸºçŸ³ã€‚<br>
è¿·èŒ«çš„æ—¶å€™è¯·è®¤çœŸåšå¥½ç°åœ¨æ¯ä¸€ä»¶èƒ½åšçš„äº‹æƒ…ï¼Œå¹¶ä¸”è¸å®åœ°åšåˆ°æè‡´ã€‚<br>
åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†å»åæ€è‡ªå·±æ˜¯å¦æœ‰æ›´å¥½çš„æ–¹å‘ã€‚</p>
<p>Time is short ã€‚</p>
<p>ä¸”å…ˆæ‰å®ä¸€å¹´çœ‹çœ‹ã€‚</p>
<h2 id="ç”µå½±">ç”µå½±</h2>
<p>å› ä¸ºç–«æƒ…çš„åŸå› ä»Šå¹´å»ç”µå½±é™¢çœ‹ç”µå½±çš„æ¬¡æ•°å±ˆæŒ‡å¯æ•°ï¼ŒåŸºæœ¬æ˜¯åœ¨æ‰‹æœºã€ç”µè§†æˆ–è€…ç”µè„‘ä¸Šå®Œæˆè§‚å½±ã€‚<br>
èŠ‚å¥ä¹Ÿè¿˜ OKï¼Œåœ¨æ…¢æ…¢æ¸…ç†ä¸€éƒ¨åˆ†ä¹‹å‰æŸä¸ªäººç»™æˆ‘åˆ—çš„æ¸…å•ï¼Œå¤§æ¦‚çœ‹å®Œä¹Ÿè¿™æ ·äº†ã€‚<br>
æ˜¯ä¸æ˜¯æ¯æ¬¡çœ‹å®Œç”µå½±åå†™ä¸ªåŒå‘é“¾æ¥ç¬”è®°ï¼Œåšä¸€äº›è‡ªæˆ‘å›é¡¾å’Œå†™ä½œï¼Œå‰æœŸå¯ä»¥ä¸€ä¸ªæœˆè‡³å°‘ä¸€æ¬¡ï¼Ÿ<br>
æˆ‘è§‰å¾—å¯ä»¥æœ‰ã€‚<br>
æ…¢æ…¢åœ¨è¡¥ä¸€äº›ä¹‹å‰æ²¡æ¥å¾—åŠæˆ–è€…å› ä¸ºæ‡’ç™Œå‘ä½œè€Œé”™è¿‡çš„æ—¥å¸¸ç•ªã€‚</p>
<h2 id="æ¸¸æˆ">æ¸¸æˆ</h2>
<p>ä¼¼ä¹ä»Šå¹´ç©æ¸¸æˆçš„æ•´ä½“æ—¶é—´å°‘äº†å¾ˆå¤šï¼Œä½†æœ‰æ—¶å€™è¿˜æ˜¯ä¼šæ”¾çºµè‡ªå·±ï¼Œæ¯”å¦‚ä»Šå¹´å›½åº†æœŸé—´çš„ 5 å¤©å‡æœŸï¼Œä¸€ä¸ªäººå®…å®¶é‡Œæ˜å¤©é»‘åœ°åœ°ä¸€ç›´æ’¸æ— ä¸»ä¹‹åœ°3ï¼Œç­‰æ—¥å­è¿‡å»äº†æ‰æƒ³æ‰“è„¸ï¼šå¹²ç‚¹å•¥ä¸å¥½ï¼Ÿ<br>
æ˜å¹´æœŸå¾…çš„æ˜¯æ€ªç‰©çŒäººæ–°ä½œï¼Œå…¶ä»–æ—¶é—´å°½é‡åœ¨æ‰‹æœºä¸Šæ‰“å‘ï¼Œè¿™æ ·è¿˜å¯ä»¥é™ªé™ªè€å©†ï¼ˆç¬‘ï¼‰ã€‚<br>
æ€»çš„æ¥è®²è¿˜æ˜¯è¦ç»§ç»­å‡å°‘æ¸¸æˆæ—¶é—´â€¦â€¦</p>
<h2 id="å¥åº·">å¥åº·</h2>
<p>ä½“é‡æ‚„æ— å£°æ¯åœ°å¾€ä¸Šèµ°ï¼Œä½†æˆ‘æœ€ä¸èƒ½å¿çš„æ˜¯è‚šå­ç«Ÿç„¶å˜å¤§äº†â€¦â€¦ä¸ºæ­¤ç„¦è™‘äº†å¥½ä¸€æ®µæ—¶é—´ï¼Œå¹¶ä¹°äº†å‡é™ç”µè„‘æ¡Œã€‚<br>
å¥èº«ç¯å’Œæœ‰æ°§æ‹³å‡»ç©äº†ä¸€æ®µæ—¶é—´åæ²¡æœ‰å†ç»§ç»­ï¼Œæ˜¯æ—¶å€™ç»§ç»­æ¡èµ·æ¥ï¼Œä¸èƒ½å†æ”¾ä»»è‡ªå·±çš„è…¹éƒ¨ç»§ç»­è†¨èƒ€â€¦â€¦<br>
æ¯”å¦‚å…ˆä»æ¯å‘¨ç©ä¸ªä¸‰æ¬¡ï¼Œå†å¢åŠ åˆ°å››æ¬¡ï¼Œæˆ–è€…æ—©ä¸Šèµ·æ¥é”»ç‚¼ï¼Ÿ<br>
ä¸ºäº†ç®¡ç†ä½“æ€è¯·å¯¹è‡ªå·±ç‹ ä¸€ç‚¹â€¦â€¦</p>
<h2 id="å…³ç³»">å…³ç³»</h2>
<p>è¦æ›´å…³çˆ±å®¶äººï¼Œæ¯å‘¨ä¸»åŠ¨ç»™çˆ¸å¦ˆæ‰“ä¸ªç”µè¯ã€‚<br>
æ˜å¹´ä¹°å¥½æˆ¿å­ï¼Œç„¶åæŠŠå…³ç³»å®šä¸‹æ¥ï¼Ÿ</p>
<blockquote>
<p>é€è€…ä¸å¯è¿½ã€‚</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[python3: dataclass ä¸ªäºº tips åˆé›†]]></title>
        <id>https://kioipp.com/post/python3-dataclass-ge-ren-tips-he-ji/</id>
        <link href="https://kioipp.com/post/python3-dataclass-ge-ren-tips-he-ji/">
        </link>
        <updated>2020-12-17T07:16:02.000Z</updated>
        <content type="html"><![CDATA[<p><code>dataclass</code> æ˜¯ python3 å¾ˆå¥½ç”¨çš„ä¸€ä¸ªå®˜æ–¹åº“ï¼Œå¯ä»¥æœ‰æ•ˆåœ°èŠ‚çœå„ç±»æ•°æ®ä½“åœ¨ <code>__init__()</code> ä¸­é‡å¤ç±»ä¼¼ self.name = name çš„ä¹¦å†™ã€‚</p>
<p>æ€»ï¼ˆæŠ„ï¼‰ç»“ï¼ˆè¢­ï¼‰äº†ä¸€äº›å¥½ç”¨çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œè®© <code>dataclass</code> ç”¨èµ·æ¥æ›´èˆ’æœã€‚</p>
<h2 id="è¿”å›æ‰€æœ‰é-none-å…ƒç´ ä½œä¸ºå­—å…¸">è¿”å›æ‰€æœ‰é None å…ƒç´ ä½œä¸ºå­—å…¸</h2>
<pre><code class="language-python">from dataclasses import dataclass, asdict, fields


def factory_filter(data: list) -&gt; dict:
    return dict(duple_item for duple_item in data if duple_item[1] is not None)


@dataclass
class BaseDataClass:
    &quot;&quot;&quot;åŸºç¡€æ•°æ®ç±»&quot;&quot;&quot;

    def get_data(self) -&gt; dict:
        &quot;&quot;&quot;è¿”å›æ‰€æœ‰é None å…ƒç´ çš„å­—å…¸&quot;&quot;&quot;
        return asdict(self, dict_factory=factory_filter)
</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code class="language-python">@dataclass
class Person(BaseDataClass):
    name: str
    age: str
    sex: str = None


peter = Person(name=&quot;peter&quot;, age=17)
peter.get_data()
</code></pre>
<p>è¾“å‡º:</p>
<pre><code class="language-json">{'name': 'peter', 'age': 17}
</code></pre>
<hr>
<h2 id="å·¥å‚æ–¹æ³•è‡ªåŠ¨å¿½ç•¥æœªå®šä¹‰çš„ä¼ å…¥å˜é‡">å·¥å‚æ–¹æ³•ï¼šè‡ªåŠ¨å¿½ç•¥æœªå®šä¹‰çš„ä¼ å…¥å˜é‡</h2>
<p>å¦‚æœç”¨ä¼ å…¥æœªå®šä¹‰çš„å˜é‡ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨å‡ºé”™ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="language-python">peter = Person(name=&quot;peter&quot;, age=17, job='student')
---------------------------------------------------------------------------
TypeError  Traceback (most recent call last)
&lt;ipython-input-4-948a3ccfe901&gt; in &lt;module&gt;
      6 
      7 
----&gt; 8 peter = Person(name=&quot;peter&quot;, age=17, job='student')

TypeError: __init__() got an unexpected keyword argument 'job'
</code></pre>
<p>è¿˜æ˜¯ä¸Šé¢çš„ <code>BaseDataClass</code>ï¼Œ æ·»åŠ ç±»æ–¹æ³•ï¼š</p>
<pre><code class="language-python">    @classmethod
    def create_from_dict(cls, **dict_) -&gt; dataclass:
        &quot;&quot;&quot;å·¥å‚æ–¹æ³•ï¼Œè‡ªåŠ¨å¿½ç•¥é dataclass å‚æ•°&quot;&quot;&quot;
        class_fields = {f.name for f in fields(cls)}
        return cls(**{k: v for k, v in dict_.items() if k in class_fields})
</code></pre>
<p>å†è¯•ä¸€æ¬¡ï¼š</p>
<pre><code class="language-python">peter = Person(name=&quot;peter&quot;, age=17)
print(Person.create_from_dict(name=&quot;peter&quot;, age=17, job='student').get_data())
</code></pre>
<p>è¾“å‡º:</p>
<pre><code class="language-json">{'name': 'peter', 'age': 17}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å†™ç»™è‡ªå·±çš„ Golang Cheatsheet]]></title>
        <id>https://kioipp.com/post/xie-gei-zi-ji-de-golang-cheatsheet/</id>
        <link href="https://kioipp.com/post/xie-gei-zi-ji-de-golang-cheatsheet/">
        </link>
        <updated>2020-11-18T07:02:58.000Z</updated>
        <content type="html"><![CDATA[<pre><code class="language-go">:=
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[namedtuple ä¸ dataclass]]></title>
        <id>https://kioipp.com/post/namedtuple-yu-dataclass/</id>
        <link href="https://kioipp.com/post/namedtuple-yu-dataclass/">
        </link>
        <updated>2020-11-13T06:29:51.000Z</updated>
        <summary type="html"><![CDATA[<p>å¸¸ç”¨çš„æ•°æ®å®šä¹‰ç±»ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>å¸¸ç”¨çš„æ•°æ®å®šä¹‰ç±»ã€‚</p>
<!-- more -->
<h1 id="å¯¹æ¯”">å¯¹æ¯”</h1>
<table>
<thead>
<tr>
<th>class</th>
<th>require</th>
<th>write_able</th>
</tr>
</thead>
<tbody>
<tr>
<td>namedtuple</td>
<td>&gt;= 2.7</td>
<td>ä¸å¯æ”¹å†™æˆ–è€…æ”¹å†™æ€§è¾ƒå·®ï¼Œä¸èƒ½è‡ªå®šä¹‰æ–¹æ³•</td>
</tr>
<tr>
<td>dataclass</td>
<td>&gt;= 3.7</td>
<td>å±æ€§å¯å†™å¯æä¾›é»˜è®¤å€¼ï¼ˆä¹Ÿå¯ä»¥ fronzen ååªè¯»ï¼‰ï¼Œå¯è‡ªå®šæ–¹æ³•ï¼Œå¯ç»§ç»­å­ç±»</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="namedtuple">namedtuple</h1>
<p>ç”¨èµ·æ¥åƒæ˜¯å¯¹ tuple ç±»æ·»åŠ äº†ç±»ä¼¼ index æˆ–è€… iterm name çš„è®¿é—®æ–¹å¼ã€‚</p>
<pre><code class="language-python"># å®šä¹‰ä¸€ä¸ªnamedtupleç±»å‹Userï¼Œå¹¶åŒ…å«nameï¼Œsexå’Œageå±æ€§ã€‚
User = namedtuple('User', ['name', 'sex', 'age'])

# åˆ›å»ºä¸€ä¸ªUserå¯¹è±¡
user = User(name='kongxx', sex='male', age=21)

# ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªlistæ¥åˆ›å»ºä¸€ä¸ªUserå¯¹è±¡ï¼Œè¿™é‡Œæ³¨æ„éœ€è¦ä½¿ç”¨&quot;_make&quot;æ–¹æ³•
user = User._make(['kongxx', 'male', 21])

print(user)
# User(name='user1', sex='male', age=21)

# è·å–ç”¨æˆ·çš„å±æ€§
print(user.name)
print(user.sex)
print(user.age)

# ä¿®æ”¹å¯¹è±¡å±æ€§ï¼Œæ³¨æ„è¦ä½¿ç”¨&quot;_replace&quot;æ–¹æ³•ï¼Œçœ‹èµ·æ¥å¾ˆä¸ä¼˜é›…
user = user._replace(age=22)
print(user)
# User(name='user1', sex='male', age=21)

# å°†Userå¯¹è±¡è½¬æ¢æˆå­—å…¸ï¼Œæ³¨æ„è¦ä½¿ç”¨&quot;_asdict&quot;
print(user._asdict())
# OrderedDict([('name', 'kongxx'), ('sex', 'male'), ('age', 22)])
</code></pre>
<hr>
<h1 id="dataclass">dataclass</h1>
<p>å®˜æ–¹æ–‡æ¡£é“¾æ¥ï¼š https://docs.python.org/3/library/dataclasses.html</p>
<p>ç®€å•ç”¨æ³•å¦‚ä¸‹ï¼Œç”¨ py3 function annotion çš„è¯­æ³•æ¥åˆ›å»ºå±æ€§</p>
<pre><code class="language-python">from dataclasses import dataclass

@dataclass
class InventoryItem:
    &quot;&quot;&quot;Class for keeping track of an item in inventory.&quot;&quot;&quot;
    name: str
    unit_price: float
    quantity_on_hand: int = 0

    def total_cost(self) -&gt; float:
        return self.unit_price * self.quantity_on_hand
</code></pre>
<p>æœ‰ä¸€ä¸ªæ‰‘å…‹ç‰Œçš„ä¾‹å­å†™å¾—å¾ˆå¥½ï¼š https://juejin.im/post/6844903853700153357</p>
<!-- more -->
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python3: å¿«é€Ÿæ¥ä¸€å‘è£…é¥°å™¨]]></title>
        <id>https://kioipp.com/post/python3-kuai-su-lai-yi-fa-zhuang-shi-qi/</id>
        <link href="https://kioipp.com/post/python3-kuai-su-lai-yi-fa-zhuang-shi-qi/">
        </link>
        <updated>2020-11-09T12:17:46.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¸€ç›´éå¸¸å–œæ¬¢è¿™ä¸ªä¸œè¥¿ï¼Œç®€æ´ã€æ˜å¿«ï½</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¸€ç›´éå¸¸å–œæ¬¢è¿™ä¸ªä¸œè¥¿ï¼Œç®€æ´ã€æ˜å¿«ï½</p>
<!-- more -->
<pre><code class="language-python">from decorator import decorator
import time


@decorator
def time_counter(func, ignore: bool = False, *args, **kwargs):
    start = time.time()
    if ignore:
        result = False
    else:
        result = func(*args, **kwargs)
    end = time.time()
    delta = end - start
    print(f&quot;The function runs {delta} seconds.&quot;)
    return result


@time_counter
def do_sleep(secondes):
    time.sleep(secondes)
    return True


@time_counter(ignore=True)
def do_nothing(secondes):
    time.sleep(secondes)
    return True


if do_sleep(4.5):
    print(&quot;Take a sleep :)&quot;)
if not do_nothing(4.5):
    print(&quot;Doing nothing :(&quot;)
</code></pre>
<hr>
<pre><code class="language-bash">$ python3 de_func.py
The function runs 4.505078077316284 seconds.
Take a sleep :)
The function runs 0.0 seconds.
Doing nothing :(
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Docker å¤šé˜¶æ®µæ„å»º]]></title>
        <id>https://kioipp.com/post/docker-duo-jie-duan-gou-jian/</id>
        <link href="https://kioipp.com/post/docker-duo-jie-duan-gou-jian/">
        </link>
        <updated>2020-10-29T02:47:25.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>å·æ‡’æ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>å·æ‡’æ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯</p>
</blockquote>
<!-- more -->
<p>ä»Šå¤©çœ‹åˆ°ä¸€ä¸ªæ¦‚å¿µï¼Œä¸æ˜¯æ–°çš„ï¼Œä½†ä¹‹å‰å´å¾ˆå¥‡æ€ªåœ°å®Œå…¨æ²¡æœ‰æ¥è§¦è¿‡ã€‚</p>
<p><a href="https://docs.docker.com/develop/develop-images/multistage-build/">Docker multi-stage builds</a></p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ Dockerfile æ”¯æŒå¤šæ¬¡ buildï¼Œç„¶åæŠŠä¸Šä¸€æ¬¡ build äº§ç”Ÿçš„æ–‡ä»¶ç›´æ¥ COPY åˆ°ä¸‹ä¸€æ¬¡çš„ build è¿‡ç¨‹ä¸­ã€‚</p>
<p>ç›¸å½“äºç¬¬äºŒæ¬¡çš„ build é‡Œåªæ‰§è¡Œäº†ä¸€æ¬¡ COPYï¼Œçœå»ä¸­é—´å¾ˆå¤šä¸‹è½½ã€å®‰è£…ã€ç¼–è¯‘çš„è¿‡ç¨‹ã€‚</p>
<h2 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h2>
<ul>
<li>æŠŠ build + run è¿‡ç¨‹åˆ†ç¦»ï¼Œè®© run åªè´Ÿè´£ runï¼›</li>
<li>å¤§å¹…åº¦å‡å°‘ run é•œåƒçš„å±‚æ•°ï¼Œä»è€Œå‹ç¼© run ç¯å¢ƒçš„åˆ†å‘å’Œæ›´æ–°æ—¶é—´ï¼›</li>
</ul>
<h2 id="ç¼ºç‚¹">ç¼ºç‚¹</h2>
<ul>
<li>å¯¹äºåŠ¨æ€è¯­è¨€æ¥è¯´ï¼ˆæ¯”å¦‚ SRE å·¥ç¨‹å¸ˆæœ€çˆ±çš„ Pythonï¼‰ï¼Œä¾èµ–ç¯å¢ƒè¾ƒéš¾å¤„ç†ï¼Œéœ€è¦ç”¨é¢å¤–çš„æ‰“åŒ…å·¥å…·ï¼›</li>
<li>æ‰“åŒ…åé•œåƒåªæœ‰ run ç¯å¢ƒï¼Œå‡ºé—®é¢˜çš„æ—¶å€™ä¸æ–¹ä¾¿è¿›è¡Œ debugï¼›</li>
</ul>
<p>ä»ä¸Šé¢çš„ä¼˜ç¼ºç‚¹å¯ä»¥çœ‹åˆ°ï¼Œå¯¹é™æ€è¯­è¨€ï¼Œå°¤å…¶æ˜¯æœ€åå¯ä»¥æ‰“åŒ…æˆäºŒè¿›åˆ¶çš„æ–‡ä»¶æ¥è¯´ï¼Œå¤šé˜¶æ®µæ„å»ºçš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå¯¹åŠ¨æ€è¯­è¨€æ¥è¯´ï¼Œå°±éœ€è¦å„ç§å°è¯•ï¼Œç¡®è®¤æ‰“åŒ…åç¨‹åºçš„ç¨³å®šæ€§ã€‚</p>
<h2 id="ä¾‹å­">ä¾‹å­</h2>
<p>è¿™é‡Œæ‘˜æŠ„ä¸¤ä¸ªåœ¨ç½‘ä¸Šçœ‹åˆ°çš„ python çš„ä¾‹å­ï¼š</p>
<h3 id="ä½¿ç”¨-wheel">ä½¿ç”¨ wheel</h3>
<pre><code>FROM python:2.7-alpine as base
RUN mkdir /svc
COPY . /svc
WORKDIR /svc
RUN apk add --update \
    postgresql-dev \
    gcc \
    musl-dev \
    linux-headers
RUN pip install wheel &amp;&amp; pip wheel . --wheel-dir=/svc/wheels

FROM python:2.7-alpine
COPY --from=base /svc /svc
WORKDIR /svc
RUN pip install --no-index --find-links=/svc/wheels -r requirements.txt
</code></pre>
<h3 id="ä½¿ç”¨-pyinstaller">ä½¿ç”¨ pyinstaller</h3>
<pre><code>FROM python:3.6 as build-env
WORKDIR /app/
ADD . /app/
ADD https://github.com/pyinstaller/pyinstaller/archive/develop.zip /app/pyinstaller-develop.zip
RUN pip install -r requirements.txt &amp;&amp; \
    pip install pyinstaller-develop.zip
RUN pyinstaller --hidden-import=tornado --onefile -d -y run.py
 
FROM frolvlad/alpine-glibc
WORKDIR /app/
COPY --from=build-env /app/dist/run .
ENTRYPOINT [&quot;./run&quot;]
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[macOS ä¸Š Python è™šæ‹Ÿç¯å¢ƒçš„ç®¡ç†: pyenv]]></title>
        <id>https://kioipp.com/post/macos-shang-python-xu-ni-huan-jing-de-guan-li-pyenv/</id>
        <link href="https://kioipp.com/post/macos-shang-python-xu-ni-huan-jing-de-guan-li-pyenv/">
        </link>
        <updated>2020-10-27T12:03:17.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>&quot;Shit moutain.&quot;</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>&quot;Shit moutain.&quot;</p>
</blockquote>
<!-- more -->
<h2 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</h2>
<blockquote>
<p>https://github.com/pyenv/pyenv</p>
</blockquote>
<h2 id="å®‰è£…">å®‰è£…</h2>
<pre><code>brew install pyenv
</code></pre>
<h2 id="å‘½ä»¤">å‘½ä»¤</h2>
<p>åˆ—å‡ºå½“å‰å·²å®‰è£…çš„ python ç‰ˆæœ¬</p>
<pre><code>pyenv version
</code></pre>
<p>åˆ—å‡ºå¯å®‰è£…ç‰ˆæœ¬</p>
<pre><code>pyenv install --list
</code></pre>
<p>åˆ—å‡ºå½“å‰å¯ç”¨çš„è™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv  virtualenvs
</code></pre>
<p>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv virtualenv &lt;Python ç‰ˆæœ¬å·&gt; &lt;è™šæ‹Ÿç¯å¢ƒåç§°&gt;
</code></pre>
<p>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv activate &lt;è™šæ‹Ÿç¯å¢ƒåç§°&gt;
</code></pre>
<p>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv deactivate
</code></pre>
<p>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>pyenv uninstall &lt;è™šæ‹Ÿç¯å¢ƒåç§°&gt;
</code></pre>
<h2 id="vscode">Vscode</h2>
<p>æŠŠå·¥ä½œåŒºé…ç½®æ–‡ä»¶é‡Œçš„ <code>&quot;python.pythonPath&quot;</code> æ¢æˆ <code>pyenv which python</code> æ‰“å°çš„è·¯å¾„ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pythonå®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•ä¸¾ä¾‹ç†è§£]]></title>
        <id>https://kioipp.com/post/python-shi-li-fang-fa-lei-fang-fa-he-jing-tai-fang-fa-ju-li-li-jie/</id>
        <link href="https://kioipp.com/post/python-shi-li-fang-fa-lei-fang-fa-he-jing-tai-fang-fa-ju-li-li-jie/">
        </link>
        <updated>2020-10-20T11:42:30.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¸€æ¬¡æ€§ç†è§£å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¸€æ¬¡æ€§ç†è§£å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•ã€‚</p>
<!-- more -->
<p>ä»Šå¤©çš„å¯¹è±¡ï¼š</p>
<ul>
<li>@classmethod ç±»æ–¹æ³•ï¼›</li>
<li>@staticmethod é™æ€æ–¹æ³•ï¼›</li>
<li>æ™®é€šå®ä¾‹æ–¹æ³•ï¼›</li>
</ul>
<h3 id="1-åŸºæœ¬ç±»">1. åŸºæœ¬ç±»</h3>
<p>å…ˆå†™ä»æ™®é€šçš„ä¸€ä¸ªç±»å†™èµ·ï¼š</p>
<pre><code class="language-python">
class Fruit(object):

    def __init__(self, name):
        self.name = name

apple = Fruit('apple')
</code></pre>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ç§°<code>Fruit</code>ä¸º<code>classï¼ˆç±»ï¼‰</code>ï¼Œ<code>apple</code>ä¸º<code>instanceï¼ˆå®ä¾‹ï¼‰</code>ã€‚</p>
<hr>
<h3 id="2-å®ä¾‹æ–¹æ³•">2. å®ä¾‹æ–¹æ³•</h3>
<p>æ¥ä¸‹æ¥å†æ·»åŠ ä¸€ä¸ªå€¼<code>price</code>å’Œæ–¹æ³•<code>show_price</code>ï¼š</p>
<pre><code class="language-python">
class Fruit(object):

    def __init__(self, name, price):
        self.name = name
        self.price = price

    def show_price(self):
        print(f'The price is {self.price}')

apple = Fruit('apple', 7.0)
apple.show_price()
</code></pre>
<p>è¿™ä¸ªæ—¶å€™ï¼Œ<code>apple.show_price</code>å°±æ˜¯<code>apple</code>è¿™ä¸ªå®ä¾‹çš„<code>instance methodï¼ˆå®ä¾‹æ–¹æ³•ï¼‰</code>ã€‚<br>
ç›´æ¥ç”¨ Fruit.show_price() è°ƒç”¨ä¼šå‡ºé”™ï¼Œä»ä¸¤ä¸ªæ¦‚å¿µä¸Šè¯´ï¼š</p>
<ul>
<li>instance methodæ˜¯<code>å®ä¾‹æ–¹æ³•</code>ï¼Œåªèƒ½ç”±<code>å®ä¾‹</code>è°ƒç”¨ï¼Œä¸èƒ½ç”±<code>ç±»</code>è°ƒç”¨ã€‚<code>show_price(self)</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>å®ä¾‹</code>ã€‚</li>
<li><code>æ°´æœ</code>æ²¡æœ‰ä»·æ ¼çš„æ¦‚å¿µï¼Œ<code>è‹¹æœ</code>æ‰æœ‰ã€‚</li>
</ul>
<hr>
<h3 id="3-ç±»æ–¹æ³•">3. ç±»æ–¹æ³•</h3>
<p>ç»§ç»­æ·»åŠ ä¸€ä¸ªæ–¹æ³•<code>eat()</code>ï¼š</p>
<pre><code class="language-python">
class Fruit(object):

    def __init__(self, name, price):
        self.name = name
        self.price = price

    def show_price(self):
        print(f'The price is {self.price}')

    @classmethod
    def eat(cls):
        print(&quot;Enjoy.&quot;)

apple = Fruit('apple', 7.0)
apple.show_price()
Fruit.eat()
apple.eat()
</code></pre>
<p>åŒæ ·ï¼Œæˆ‘ä»¬ä»ä¸¤ä¸ªçº¬åº¦ç†è§£ï¼š</p>
<ul>
<li><code>eat(cls)</code>çš„å‚æ•°æ˜¯ <code>cls</code>ï¼Œå³ç±»æ˜¯å®ƒçš„å‚æ•°ï¼Œå› æ­¤å¯ä»¥ä»ç±»ç›´æ¥è°ƒç”¨ã€‚å®ä¾‹ä¹Ÿæ˜¯ç±»ï¼Œå› æ­¤å®ä¾‹ä¹Ÿå¯ä»¥è°ƒç”¨ã€‚ç±»æ–¹æ³•ä¸»è¦ç”¨äºä¸€äº›ä¸éœ€è¦å®ä¾‹åŒ–ç±»å°±èƒ½è°ƒç”¨çš„æ–¹æ³•ã€‚</li>
<li>ç»å¤§éƒ¨åˆ†æ°´æœå…·æœ‰å¯ä»¥é£Ÿç”¨çš„å±æ€§ï¼Œå› æ­¤è¯´<code>åƒæ°´æœ</code>å’Œ<code>åƒè‹¹æœ</code>åœ¨é€»è¾‘ä¸Šéƒ½æˆç«‹ã€‚</li>
</ul>
<hr>
<h3 id="4-é™æ€æ–¹æ³•">4. é™æ€æ–¹æ³•</h3>
<p>è¿™æ¬¡æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªé™æ€æ–¹æ³• <code>will_go_bad()</code> å’Œä¸€ä¸ªå¤–éƒ¨çš„é™æ€å˜é‡ <code>BAD_WEATHER</code></p>
<pre><code class="language-python">
BAD_WEATHER = True

class Fruit(object):

    def __init__(self, name, price):
        self.name = name
        self.price = price

    def show_price(self):
        print(f'The price is {self.price}')

    @classmethod
    def eat(cls):
        print(&quot;Enjoy.&quot;)

    @staticmethod
    def will_go_bad():
        if BAD_WEATHER:
            return True

apple = Fruit('apple', 7.0)
apple.will_go_bad()
Fruit.will_go_bad()
</code></pre>
<ul>
<li>ä»ç©ºé—´ä¸Šç†è§£ï¼Œé™æ€æ–¹æ³• <code>will_go_bad()</code> åªæ˜¯å®šä¹‰åœ¨ç±»è¿™ä¸ªç©ºé—´ï¼ˆç±»å‘½åç©ºé—´ï¼‰ä¸­ï¼Œæ²¡æœ‰ä»»ä½•ç‰¹æ®Šçš„<code>cls</code> æˆ–è€…<code>self</code> çš„ç»‘å®šï¼Œå®ƒä¹Ÿ<code>ä¸èƒ½è®¿é—®ç±»é‡Œä»»ä½•çš„å¯¹è±¡æˆ–è€…æ–¹æ³•</code>ã€‚å’Œå…¨å±€å‡½æ•°ä¸åŒçš„æ˜¯ï¼Œå®ƒåªèƒ½é€šè¿‡è®¿é—®ç±»è¿™ä¸ªç©ºé—´æ¥è°ƒç”¨ã€‚é™æ€æ–¹æ³•ç”¨äºå¤„ç†ç±»å¤–éƒ¨ä¾èµ–çš„äº¤äº’ã€‚</li>
<li>ä»é€»è¾‘ä¸Šç†è§£ï¼Œåå¤©æ°”ä¼šå½±å“æ°´æœçš„å¥½åï¼›ä½†åå¤©æ°”å’Œæ°´æœä¹‹é—´æ˜¯ä¸èƒ½äº’ç›¸è®¿é—®çš„ï¼Œåªèƒ½é€šè¿‡æŸç§é€»è¾‘è¿›è¡Œå…³è”ã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[manage.py: ç®€æ˜å¥½ç”¨çš„ CLI builder]]></title>
        <id>https://kioipp.com/post/managepy-jian-ming-hao-yong-de-cli-builder/</id>
        <link href="https://kioipp.com/post/managepy-jian-ming-hao-yong-de-cli-builder/">
        </link>
        <updated>2020-10-19T03:16:05.000Z</updated>
        <summary type="html"><![CDATA[<p>&quot;CLI is everything.&quot;</p>
]]></summary>
        <content type="html"><![CDATA[<p>&quot;CLI is everything.&quot;</p>
<!-- more -->
<h2 id="pip-å®˜æ–¹é¡¹ç›®åœ°å€">PIP å®˜æ–¹é¡¹ç›®åœ°å€</h2>
<blockquote>
<p>https://pypi.org/project/manage.py/  ï¼ˆå«å®˜æ–¹ç”¨ä¾‹ï¼‰</p>
</blockquote>
<h2 id="å®‰è£…">å®‰è£…</h2>
<pre><code class="language-bash">pip install mange.py
</code></pre>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<h3 id="1åˆ›å»ºå‘½ä»¤">1.åˆ›å»ºå‘½ä»¤</h3>
<pre><code class="language-python">from manager import Manager

manager_echo = Manager()


@manager_echo.command
def echo_with_no_args():
    &quot;&quot;&quot;Command description, will show on command line.
    &quot;&quot;&quot;
    print(&quot;Hello&quot;)


if __name__ == '__main__':
    manager_echo.main()
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py
usage: cli_sample.py &lt;command&gt; [&lt;args&gt;]

positional arguments:
  command     the command to run

optional arguments:
  -h, --help  show this help message and exit

available commands:
  echo_with_no_args        Command description, will show on command line.
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py echo_with_no_args
Hello
</code></pre>
<hr>
<h3 id="2-å¤šé‡-namepspace-ç®¡ç†">2. å¤šé‡ namepspace ç®¡ç†</h3>
<pre><code class="language-python">from manager import Manager
import time

manager_echo = Manager()
manager_ops = Manager()
manager_main = Manager()

manager_main.merge(manager_echo, namespace='echo')
manager_main.merge(manager_ops, namespace='ops')


@manager_echo.command
def echo_with_no_args():
    &quot;&quot;&quot;Command description, will show on command line.
    &quot;&quot;&quot;
    print(&quot;Hello&quot;)


@manager_ops.command
def ops_with_no_args():
    &quot;&quot;&quot;Do some operation without args.
    &quot;&quot;&quot;
    print(time.time() + 1.0)


manager_main.merge(manager_echo, namespace='echo')
manager_main.merge(manager_ops, namespace='ops')

if __name__ == '__main__':
    manager_main.main()
</code></pre>
<pre><code class="language-bash">python3 cli_sample.py
usage: cli_sample.py [&lt;namespace&gt;.]&lt;command&gt; [&lt;args&gt;]

positional arguments:
  command     the command to run

optional arguments:
  -h, --help  show this help message and exit

available commands:

  [echo]
    echo_with_no_args      Command description, will show on command line.


  [ops]
    ops_with_no_args       Do some operation without args.
</code></pre>
<pre><code class="language-bash">python3 cli_sample.py ops.ops_with_no_args
1603078473.9244218
</code></pre>
<hr>
<h3 id="3ä¸å¸¦æç¤º-æŒ‰ç…§é¡ºåºè¾“å…¥çš„å‚æ•°">3.ä¸å¸¦æç¤ºã€æŒ‰ç…§é¡ºåºè¾“å…¥çš„å‚æ•°</h3>
<pre><code class="language-python">@manager_echo.command
def echo_with_args(name, pid):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    print(f'Name is {name}, PID is {pid}')
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args  test 77
Name is test, PID is 77
</code></pre>
<hr>
<h3 id="4å¸¦æç¤ºçš„é¡ºåºè¾“å…¥çš„å‚æ•°">4.å¸¦æç¤ºçš„é¡ºåºè¾“å…¥çš„å‚æ•°</h3>
<pre><code class="language-python">@manager_echo.arg('name', help='User\'s name')
@manager_echo.arg('pid', help='App\'s PID')
@manager_echo.command
def echo_with_args(name, pid):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    print(f'Name is {name}, PID is {pid}')
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args -h
usage: cli_sample.py echo.echo_with_args [-h] name pid

Echo given &lt;params&gt;

positional arguments:
  name        User's name
  pid         App's PID

optional arguments:
  -h, --help  show this help message and exit
</code></pre>
<hr>
<h3 id="5-å¿…è¦å‚æ•°å’Œéå¿…è¦å‚æ•°çš„æç¤ºè¾“å…¥">5. å¿…è¦å‚æ•°å’Œéå¿…è¦å‚æ•°çš„æç¤ºè¾“å…¥</h3>
<pre><code class="language-python">@manager_echo.arg('name', help='User\'s name')
@manager_echo.arg('pid', help='App\'s PID')
@manager_echo.command
def echo_with_args(name, pid=''):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    print(f'Name is {name}, PID is {pid}')
</code></pre>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args -h
usage: cli_sample.py echo.echo_with_args [-h] [--name NAME] [--pid PID]

Echo given &lt;params&gt;

optional arguments:
  -h, --help   show this help message and exit
  --name NAME  User's name
  --pid PID    App's PID
</code></pre>
<pre><code class="language-bash">$ temp python3 cli_sample.py echo.echo_with_args 123
Name is 123, PID is
$ temp python3 cli_sample.py echo.echo_with_args 123 --pid 777
Name is 123, PID is 777
</code></pre>
<hr>
<p>æˆ–è€…ä½œä¸ºå¸ƒå°”å€¼ä½¿ç”¨ï¼š</p>
<pre><code class="language-python">@manager_echo.arg('name', help='User\'s name')
@manager_echo.arg('pid', help='App\'s PID')
@manager_echo.command
def echo_with_args(name, pid=False):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    if pid:
        print(f'Name is {name}, PID exists')
    else:
        print(f'Name is {name}, PID not exists')
</code></pre>
<hr>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args batman
Name is batman, PID not exists
$ python3 cli_sample.py echo.echo_with_args batman --pid
Name is batman, PID exists
</code></pre>
<hr>
<h3 id="6å‚æ•°-shortcuts">6.å‚æ•° shortcuts</h3>
<pre><code class="language-python">@manager_echo.arg('name', shortcut='n', help='User\'s name')
@manager_echo.arg('pid', shortcut='p', help='App\'s PID')
@manager_echo.command
def echo_with_args(name, pid=False):
    &quot;&quot;&quot;Echo given &lt;params&gt;
    &quot;&quot;&quot;
    if pid:
        print(f'Name is {name}, PID exists')
    else:
        print(f'Name is {name}, PID not exists')
</code></pre>
<hr>
<pre><code class="language-bash">$ python3 cli_sample.py echo.echo_with_args batman --p
Name is batman, PID exists
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SFM(çŠ¶æ€æœº)è½®å­ï¼štransitions å­¦ä¹ ]]></title>
        <id>https://kioipp.com/post/python-sfmzhuang-tai-ji-lun-zi-transitions-xue-xi/</id>
        <link href="https://kioipp.com/post/python-sfmzhuang-tai-ji-lun-zi-transitions-xue-xi/">
        </link>
        <updated>2020-10-15T07:43:20.000Z</updated>
        <content type="html"><![CDATA[<p>ä»åŒäº‹å†™çš„ä¸€ä¸ªå·¥å…·é‡Œå‘ç°äº†è¿™ä¸ªåº“ï¼Œèƒ½é€‚ç”¨å¾ˆå¤šéœ€è¦çŠ¶æ€ç®¡ç†çš„åœºæ™¯ï¼Œä½œè€…å†™çš„ Code Samples æ›´æœ‰æ„æ€ã€‚ç‰¹æ­¤è®°å½•å¹¶å†™ä¸‹å­¦ä¹ è¿™ä¸ªåº“æ—¶å€™çš„å¿ƒå¾—ã€‚</p>
<h2 id="è™è ä¾ å¿«é€Ÿç¤ºèŒƒ">è™è ä¾ å¿«é€Ÿç¤ºèŒƒ</h2>
<pre><code class="language-python">from transitions import Machine
import random

class NarcolepticSuperhero(object):

    # Define some states. Most of the time, narcoleptic superheroes are just like
    # everyone else. Except for...
    &quot;&quot;&quot;å®šä¹‰ä¸€ä¸ªè¶…çº§è‹±é›„çš„æ—¥å¸¸è¡Œä¸ºçŠ¶æ€
    &quot;&quot;&quot;
    states = ['asleep', 'hanging out', 'hungry', 'sweaty', 'saving the world']

    def __init__(self, name):

        # No anonymous superheroes on my watch! Every narcoleptic superhero gets
        # a name. Any name at all. SleepyMan. SlumberGirl. You get the idea.
        ## å“ªæ€•æ˜¯å«å°å¼ºï¼Œè¶…çº§è‹±é›„ä¹Ÿæ˜¯éœ€è¦ä¸€ä¸ªå“äº®çš„åå­—
        self.name = name

        # What have we accomplished today?
        ## è¶…çº§è‹±é›„æ—¥å¸¸æ‹¯æ•‘å°çŒ«ä»»åŠ¡è®¡æ•° 0/999999
        self.kittens_rescued = 0

        # Initialize the state machine
        ## è¶…çº§è‹±é›„çš„ä¸€å¤©ä»ç¡è§‰å¼€å§‹ï¼ˆé›¾
        self.machine = Machine(model=self, states=NarcolepticSuperhero.states, initial='asleep')

        # Add some transitions. We could also define these using a static list of
        # dictionaries, as we did with states above, and then pass the list to
        # the Machine initializer as the transitions= argument.

        ## ç»™è¶…çº§è‹±é›„æ·»åŠ ä¸€ç³»åˆ—ä»»åŠ¡ï¼Œè¿™æ ·å°±èƒ½è®©è¶…çº§è‹±é›„ä»èµ·åºŠåˆ·ç‰™åˆ°æ‹¯æ•‘åœ°çƒäº†
        # At some point, every superhero must rise and shine.
        self.machine.add_transition(trigger='wake_up', source='asleep', dest='hanging out')

        # Superheroes need to keep in shape.
        self.machine.add_transition('work_out', 'hanging out', 'hungry')

        # Those calories won't replenish themselves!
        self.machine.add_transition('eat', 'hungry', 'hanging out')

        # Superheroes are always on call. ALWAYS. But they're not always
        # dressed in work-appropriate clothing.

        ## è¶…çº§è‹±é›„å¯ä»¥ä»ä»»ä½•æ—¶å€™è¿›è¡Œæ‹¯æ•‘ä¸–ç•ŒçŠ¶æ€ï¼Œä½†éœ€è¦å…ˆç©¿ä¸ŠèµåŠ©å•†å®šåˆ¶æˆ˜è¡£ï½
        self.machine.add_transition('distress_call', '*', 'saving the world',
                         before='change_into_super_secret_costume')

        # When they get off work, they're all sweaty and disgusting. But before
        # they do anything else, they have to meticulously log their latest
        # escapades. Because the legal department says so.
        ## åœ¨å®Œæˆä»»åŠ¡åï¼Œä¸»æœºä¼šè‡ªåŠ¨ç»™è¶…çº§è‹±é›„è®°ä¸Šä¸€ç¬”å°çº¢èŠ±
        self.machine.add_transition('complete_mission', 'saving the world', 'sweaty',
                         after='update_journal')

        # Sweat is a disorder that can be remedied with water.
        # Unless you've had a particularly long day, in which case... bed time!
        ## å…¥ç¡å‰å¿…é¡»æ´—æ¾¡ï¼Œé™¤éè¶…çº§è‹±é›„ä»Šå¤©å‹æ ¹å°±æ²¡å‡ºé—¨â€¦â€¦ï¼ˆå³ä½¿è¿™æ ·ä¹Ÿè¦æ´—æ¾¡çš„å§å–‚ï¼éš¾é“è¶…çº§è‹±é›„æ˜¯åŒ—æ–¹äººå—ï¼Ÿ
        self.machine.add_transition('clean_up', 'sweaty', 'asleep', conditions=['is_exhausted'])
        self.machine.add_transition('clean_up', 'sweaty', 'hanging out')

        # Our NarcolepticSuperhero can fall asleep at pretty much any time.
        ## æ²¡é”™ï¼è¶…çº§è‹±é›„ä»»ä½•æ—¶å€™éƒ½èƒ½å…¥ç¡ï¼
        self.machine.add_transition('nap', '*', 'asleep')

    def update_journal(self):
        &quot;&quot;&quot; Dear Diary, today I saved Mr. Whiskers. Again. &quot;&quot;&quot;
        self.kittens_rescued += 1

    @property
    def is_exhausted(self):
        &quot;&quot;&quot; Basically a coin toss. &quot;&quot;&quot;
        return random.random() &lt; 0.5

    def change_into_super_secret_costume(self):
        print(&quot;Beauty, eh?&quot;)

</code></pre>
<p>ä¸‹é¢æˆ‘ä»¬æœ‰è¯·è™è ä¾ è¿›è¡Œè¶…çº§è‹±é›„ç¤ºèŒƒ ğŸ‘</p>
<pre><code class="language-bash">&gt;&gt;&gt; batman = NarcolepticSuperhero(&quot;Batman&quot;)
&gt;&gt;&gt; batman.state
'asleep'

&gt;&gt;&gt; batman.wake_up()
&gt;&gt;&gt; batman.state
'hanging out'

&gt;&gt;&gt; batman.nap()
&gt;&gt;&gt; batman.state
'asleep'

&gt;&gt;&gt; batman.clean_up()
MachineError: &quot;Can't trigger event clean_up from state asleep!&quot;

&gt;&gt;&gt; batman.wake_up()
&gt;&gt;&gt; batman.work_out()
&gt;&gt;&gt; batman.state
'hungry'

# Batman still hasn't done anything useful...
&gt;&gt;&gt; batman.kittens_rescued
0

# We now take you live to the scene of a horrific kitten entreement...
&gt;&gt;&gt; batman.distress_call()
'Beauty, eh?'
&gt;&gt;&gt; batman.state
'saving the world'

# Back to the crib.
&gt;&gt;&gt; batman.complete_mission()
&gt;&gt;&gt; batman.state
'sweaty'

&gt;&gt;&gt; batman.clean_up()
&gt;&gt;&gt; batman.state
'asleep'   # Too tired to shower!

# Another productive day, Alfred.
&gt;&gt;&gt; batman.kittens_rescued
1
</code></pre>
<p>TOBE Continued .</p>
]]></content>
    </entry>
</feed>